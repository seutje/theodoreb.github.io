---
layout: post
title: "Visualization of jQuery use in Drupal 8"
summary: "The exhaustive list of what Drupal uses jQuery for"
comments: "issues/11"
date: 2015-04-10 20:00:00 +0200
tags: jquery drupal drupal-planet
---

Since FrontendUnited 2012 Amsterdam, I've been saying Drupal core should 
significantly cut it's jQuery use. Until now it was without much data to back
it up. What follows is a visualization of jQuery modules use in Drupal 8 code,
it's fancy so feel free to click everywhere. There is additional information 
in titles, be sure to check those out. Took long enough to make, sorry mobile users.


<div id="rss-friend"><a href="http://read.theodoreb.net/2015/viz-drupal-use-of-jquery.html"><img src="http://read.theodoreb.net/assets/2015-04/jquery-modules-use-drupal.png" alt="preview of the visualization graph"></a></div>
<div id="rss-fiend" style="display:none">
<div id="graph"><div id="bubblewrap"><a class="node depth-0" title="undefined #0" style="left: 0px; top: 0px; width: 927px; height: 599px;"><span></span></a><a href="#traversing" class="node depth-1" title="traversing #883" style="left: 0px; top: 0px; width: 328px; height: 599px; background: rgb(31, 119, 180);"><span>traversing</span></a><a href="#traversing-has" class="node depth-2 hidden" data-module="traversing" title="has #7" style="left: 245px; top: 499px; width: 44px; height: 34px;"><span>has</span></a><a href="#traversing-closest" class="node depth-2 hidden" data-module="traversing" title="closest #78" style="left: 0px; top: 314px; width: 119px; height: 144px;"><span>closest</span></a><a href="#traversing-index" class="node depth-2 hidden" data-module="traversing" title="index #10" style="left: 203px; top: 499px; width: 41px; height: 52px;"><span>index</span></a><a href="#traversing-add" class="node depth-2 hidden" data-module="traversing" title="add #9" style="left: 203px; top: 552px; width: 41px; height: 47px;"><span>add</span></a><a href="#traversing-addBack" class="node depth-2 hidden" data-module="traversing" title="addBack #5" style="left: 282px; top: 534px; width: 25px; height: 42px;"><span>addBack</span></a><a href="#traversing-parent" class="node depth-2 hidden" data-module="traversing" title="parent #50" style="left: 227px; top: 314px; width: 101px; height: 108px;"><span>parent</span></a><a href="#traversing-parents" class="node depth-2 hidden" data-module="traversing" title="parents #5" style="left: 245px; top: 570px; width: 36px; height: 29px;"><span>parents</span></a><a href="#traversing-parentsUntil" class="node depth-2 hidden" data-module="traversing" title="parentsUntil #1" style="left: 320px; top: 577px; width: 8px; height: 22px;"><span>parentsUntil</span></a><a href="#traversing-next" class="node depth-2 hidden" data-module="traversing" title="next #22" style="left: 203px; top: 423px; width: 64px; height: 75px;"><span>next</span></a><a href="#traversing-prev" class="node depth-2 hidden" data-module="traversing" title="prev #23" style="left: 120px; top: 539px; width: 82px; height: 60px;"><span>prev</span></a><a href="#traversing-nextAll" class="node depth-2 hidden" data-module="traversing" title="nextAll #2" style="left: 301px; top: 577px; width: 18px; height: 22px;"><span>nextAll</span></a><a href="#traversing-prevAll" class="node depth-2 hidden" data-module="traversing" title="prevAll #6" style="left: 290px; top: 499px; width: 38px; height: 34px;"><span>prevAll</span></a><a href="#traversing-nextUntil" class="node depth-2 hidden" data-module="traversing" title="nextUntil #6" style="left: 245px; top: 534px; width: 36px; height: 35px;"><span>nextUntil</span></a><a href="#traversing-siblings" class="node depth-2 hidden" data-module="traversing" title="siblings #4" style="left: 308px; top: 534px; width: 20px; height: 42px;"><span>siblings</span></a><a href="#traversing-children" class="node depth-2 hidden" data-module="traversing" title="children #43" style="left: 120px; top: 423px; width: 82px; height: 115px;"><span>children</span></a><a href="#traversing-contents" class="node depth-2 hidden" data-module="traversing" title="contents #2" style="left: 282px; top: 577px; width: 18px; height: 22px;"><span>contents</span></a><a href="#traversing-filter" class="node depth-2 hidden" data-module="traversing" title="filter #52" style="left: 120px; top: 314px; width: 106px; height: 108px;"><span>filter</span></a><a href="#traversing-find" class="node depth-2 hidden" data-module="traversing" title="find #462" style="left: 0px; top: 0px; width: 328px; height: 313px;"><span>find</span></a><a href="#traversing-not" class="node depth-2 hidden" data-module="traversing" title="not #21" style="left: 268px; top: 423px; width: 60px; height: 75px;"><span>not</span></a><a href="#traversing-is" class="node depth-2 hidden" data-module="traversing" title="is #75" style="left: 0px; top: 459px; width: 119px; height: 140px;"><span>is</span></a><a href="#attributes" class="node depth-1" title="attributes #564" style="left: 329px; top: 0px; width: 372px; height: 337px; background: rgb(255, 127, 14);"><span>attributes</span></a><a href="#attributes-attr" class="node depth-2 hidden" data-module="attributes" title="attr #190" style="left: 329px; top: 0px; width: 203px; height: 207px;"><span>attr</span></a><a href="#attributes-removeAttr" class="node depth-2 hidden" data-module="attributes" title="removeAttr #9" style="left: 679px; top: 261px; width: 22px; height: 76px;"><span>removeAttr</span></a><a href="#attributes-addClass" class="node depth-2 hidden" data-module="attributes" title="addClass #102" style="left: 533px; top: 0px; width: 168px; height: 134px;"><span>addClass</span></a><a href="#attributes-removeClass" class="node depth-2 hidden" data-module="attributes" title="removeClass #57" style="left: 533px; top: 135px; width: 100px; height: 125px;"><span>removeClass</span></a><a href="#attributes-toggleClass" class="node depth-2 hidden" data-module="attributes" title="toggleClass #25" style="left: 606px; top: 261px; width: 72px; height: 76px;"><span>toggleClass</span></a><a href="#attributes-hasClass" class="node depth-2 hidden" data-module="attributes" title="hasClass #25" style="left: 533px; top: 261px; width: 72px; height: 76px;"><span>hasClass</span></a><a href="#attributes-prop" class="node depth-2 hidden" data-module="attributes" title="prop #38" style="left: 634px; top: 135px; width: 67px; height: 125px;"><span>prop</span></a><a href="#attributes-val" class="node depth-2 hidden" data-module="attributes" title="val #118" style="left: 329px; top: 208px; width: 203px; height: 129px;"><span>val</span></a><a href="#event" class="node depth-1" title="event #341" style="left: 702px; top: 0px; width: 225px; height: 337px; background: rgb(44, 160, 44);"><span>event</span></a><a href="#event-event" class="node depth-2 hidden" data-module="event" title="event #25" style="left: 816px; top: 229px; width: 79px; height: 69px;"><span>event</span></a><a href="#event-on" class="node depth-2 hidden" data-module="event" title="on #158" style="left: 702px; top: 0px; width: 225px; height: 156px;"><span>on</span></a><a href="#event-one" class="node depth-2 hidden" data-module="event" title="one #2" style="left: 896px; top: 299px; width: 20px; height: 20px;"><span>one</span></a><a href="#event-off" class="node depth-2 hidden" data-module="event" title="off #36" style="left: 816px; top: 157px; width: 111px; height: 71px;"><span>off</span></a><a href="#event-trigger" class="node depth-2 hidden" data-module="event" title="trigger #92" style="left: 702px; top: 157px; width: 113px; height: 180px;"><span>trigger</span></a><a href="#event-triggerHandler" class="node depth-2 hidden" data-module="event" title="triggerHandler #1" style="left: 917px; top: 299px; width: 10px; height: 20px;"><span>triggerHandler</span></a><a href="#event-focus" class="node depth-2 hidden" data-module="event" title="focus #6" style="left: 896px; top: 229px; width: 31px; height: 41px;"><span>focus</span></a><a href="#event-load" class="node depth-2 hidden" data-module="event" title="load #2" style="left: 896px; top: 271px; width: 15px; height: 27px;"><span>load</span></a><a href="#event-click" class="node depth-2 hidden" data-module="event" title="click #2" style="left: 912px; top: 271px; width: 15px; height: 27px;"><span>click</span></a><a href="#event-select" class="node depth-2 hidden" data-module="event" title="select #1" style="left: 896px; top: 320px; width: 11px; height: 17px;"><span>select</span></a><a href="#event-error" class="node depth-2 hidden" data-module="event" title="error #1" style="left: 908px; top: 320px; width: 11px; height: 17px;"><span>error</span></a><a href="#event-bind" class="node depth-2 hidden" data-module="event" title="bind #14" style="left: 816px; top: 299px; width: 79px; height: 38px;"><span>bind</span></a><a href="#event-unbind" class="node depth-2 hidden" data-module="event" title="unbind #1" style="left: 920px; top: 320px; width: 7px; height: 17px;"><span>unbind</span></a><a href="#manipulation" class="node depth-1" title="manipulation #246" style="left: 329px; top: 338px; width: 209px; height: 261px; background: rgb(214, 39, 40);"><span>manipulation</span></a><a href="#manipulation-clone" class="node depth-2 hidden" data-module="manipulation" title="clone #4" style="left: 504px; top: 545px; width: 34px; height: 25px;"><span>clone</span></a><a href="#manipulation-text" class="node depth-2 hidden" data-module="manipulation" title="text #43" style="left: 434px; top: 338px; width: 104px; height: 91px;"><span>text</span></a><a href="#manipulation-append" class="node depth-2 hidden" data-module="manipulation" title="append #38" style="left: 329px; top: 430px; width: 86px; height: 97px;"><span>append</span></a><a href="#manipulation-prepend" class="node depth-2 hidden" data-module="manipulation" title="prepend #19" style="left: 479px; top: 430px; width: 59px; height: 70px;"><span>prepend</span></a><a href="#manipulation-before" class="node depth-2 hidden" data-module="manipulation" title="before #7" style="left: 504px; top: 501px; width: 34px; height: 43px;"><span>before</span></a><a href="#manipulation-after" class="node depth-2 hidden" data-module="manipulation" title="after #13" style="left: 416px; top: 501px; width: 46px; height: 61px;"><span>after</span></a><a href="#manipulation-remove" class="node depth-2 hidden" data-module="manipulation" title="remove #43" style="left: 329px; top: 338px; width: 104px; height: 91px;"><span>remove</span></a><a href="#manipulation-empty" class="node depth-2 hidden" data-module="manipulation" title="empty #3" style="left: 504px; top: 571px; width: 22px; height: 28px;"><span>empty</span></a><a href="#manipulation-html" class="node depth-2 hidden" data-module="manipulation" title="html #28" style="left: 329px; top: 528px; width: 86px; height: 71px;"><span>html</span></a><a href="#manipulation-replaceWith" class="node depth-2 hidden" data-module="manipulation" title="replaceWith #2" style="left: 527px; top: 571px; width: 11px; height: 28px;"><span>replaceWith</span></a><a href="#manipulation-detach" class="node depth-2 hidden" data-module="manipulation" title="detach #5" style="left: 463px; top: 545px; width: 40px; height: 26px;"><span>detach</span></a><a href="#manipulation-appendTo" class="node depth-2 hidden" data-module="manipulation" title="appendTo #20" style="left: 416px; top: 430px; width: 62px; height: 70px;"><span>appendTo</span></a><a href="#manipulation-prependTo" class="node depth-2 hidden" data-module="manipulation" title="prependTo #8" style="left: 416px; top: 563px; width: 46px; height: 36px;"><span>prependTo</span></a><a href="#manipulation-insertBefore" class="node depth-2 hidden" data-module="manipulation" title="insertBefore #8" style="left: 463px; top: 501px; width: 40px; height: 43px;"><span>insertBefore</span></a><a href="#manipulation-insertAfter" class="node depth-2 hidden" data-module="manipulation" title="insertAfter #5" style="left: 463px; top: 572px; width: 40px; height: 27px;"><span>insertAfter</span></a><a href="#css" class="node depth-1" title="css #180" style="left: 539px; top: 338px; width: 153px; height: 261px; background: rgb(148, 103, 189);"><span>css</span></a><a href="#css-css" class="node depth-2 hidden" data-module="css" title="css #60" style="left: 539px; top: 338px; width: 153px; height: 86px;"><span>css</span></a><a href="#css-show" class="node depth-2 hidden" data-module="css" title="show #37" style="left: 624px; top: 425px; width: 68px; height: 118px;"><span>show</span></a><a href="#css-hide" class="node depth-2 hidden" data-module="css" title="hide #45" style="left: 539px; top: 425px; width: 84px; height: 118px;"><span>hide</span></a><a href="#css-toggle" class="node depth-2 hidden" data-module="css" title="toggle #14" style="left: 539px; top: 544px; width: 55px; height: 55px;"><span>toggle</span></a><a href="#css-:hidden" class="node depth-2 hidden" data-module="css" title=":hidden #11" style="left: 639px; top: 544px; width: 53px; height: 45px;"><span>:hidden</span></a><a href="#css-:visible" class="node depth-2 hidden" data-module="css" title=":visible #11" style="left: 595px; top: 544px; width: 43px; height: 55px;"><span>:visible</span></a><a href="#css-swap" class="node depth-2 hidden" data-module="css" title="swap #2" style="left: 639px; top: 590px; width: 53px; height: 9px;"><span>swap</span></a><a href="#sizzle" class="node depth-1" title="sizzle #137" style="left: 693px; top: 338px; width: 234px; height: 129px; background: rgb(140, 86, 75);"><span>sizzle</span></a><a href="#sizzle-:checkbox" class="node depth-2 hidden" data-module="sizzle" title=":checkbox #2" style="left: 863px; top: 431px; width: 23px; height: 18px;"><span>:checkbox</span></a><a href="#sizzle-:checked" class="node depth-2 hidden" data-module="sizzle" title=":checked #41" style="left: 693px; top: 338px; width: 69px; height: 129px;"><span>:checked</span></a><a href="#sizzle-:first" class="node depth-2 hidden" data-module="sizzle" title=":first #18" style="left: 763px; top: 338px; width: 59px; height: 66px;"><span>:first</span></a><a href="#sizzle-:selected" class="node depth-2 hidden" data-module="sizzle" title=":selected #4" style="left: 896px; top: 385px; width: 31px; height: 26px;"><span>:selected</span></a><a href="#sizzle-:radio" class="node depth-2 hidden" data-module="sizzle" title=":radio #1" style="left: 900px; top: 450px; width: 11px; height: 17px;"><span>:radio</span></a><a href="#sizzle-:visible" class="node depth-2 hidden" data-module="sizzle" title=":visible #11" style="left: 823px; top: 338px; width: 51px; height: 46px;"><span>:visible</span></a><a href="#sizzle-:has" class="node depth-2 hidden" data-module="sizzle" title=":has #1" style="left: 914px; top: 434px; width: 13px; height: 15px;"><span>:has</span></a><a href="#sizzle-:not" class="node depth-2 hidden" data-module="sizzle" title=":not #17" style="left: 763px; top: 405px; width: 59px; height: 62px;"><span>:not</span></a><a href="#sizzle-:input" class="node depth-2 hidden" data-module="sizzle" title=":input #10" style="left: 823px; top: 385px; width: 39px; height: 55px;"><span>:input</span></a><a href="#sizzle-:header" class="node depth-2 hidden" data-module="sizzle" title=":header #1" style="left: 887px; top: 451px; width: 12px; height: 16px;"><span>:header</span></a><a href="#sizzle-:disabled" class="node depth-2 hidden" data-module="sizzle" title=":disabled #4" style="left: 863px; top: 385px; width: 32px; height: 26px;"><span>:disabled</span></a><a href="#sizzle-:focus" class="node depth-2 hidden" data-module="sizzle" title=":focus #1" style="left: 887px; top: 434px; width: 12px; height: 16px;"><span>:focus</span></a><a href="#sizzle-:hidden" class="node depth-2 hidden" data-module="sizzle" title=":hidden #11" style="left: 875px; top: 338px; width: 52px; height: 46px;"><span>:hidden</span></a><a href="#sizzle-:last" class="node depth-2 hidden" data-module="sizzle" title=":last #5" style="left: 823px; top: 441px; width: 39px; height: 26px;"><span>:last</span></a><a href="#sizzle-:enabled" class="node depth-2 hidden" data-module="sizzle" title=":enabled #2" style="left: 863px; top: 450px; width: 23px; height: 17px;"><span>:enabled</span></a><a href="#sizzle-:eq" class="node depth-2 hidden" data-module="sizzle" title=":eq #1" style="left: 900px; top: 434px; width: 13px; height: 15px;"><span>:eq</span></a><a href="#sizzle-:nth" class="node depth-2 hidden" data-module="sizzle" title=":nth #2" style="left: 863px; top: 412px; width: 23px; height: 18px;"><span>:nth</span></a><a href="#sizzle-:odd" class="node depth-2 hidden" data-module="sizzle" title=":odd #2" style="left: 887px; top: 412px; width: 19px; height: 21px;"><span>:odd</span></a><a href="#sizzle-:even" class="node depth-2 hidden" data-module="sizzle" title=":even #2" style="left: 907px; top: 412px; width: 20px; height: 21px;"><span>:even</span></a><a href="#sizzle-:file" class="node depth-2 hidden" data-module="sizzle" title=":file #1" style="left: 912px; top: 450px; width: 15px; height: 17px;"><span>:file</span></a><a href="#data" class="node depth-1" title="data #66" style="left: 693px; top: 468px; width: 111px; height: 131px; background: rgb(227, 119, 194);"><span>data</span></a><a href="#data-data" class="node depth-2 hidden" data-module="data" title="data #63" style="left: 693px; top: 468px; width: 111px; height: 125px;"><span>data</span></a><a href="#data-removeData" class="node depth-2 hidden" data-module="data" title="removeData #3" style="left: 693px; top: 594px; width: 111px; height: 5px;"><span>removeData</span></a><a href="#ajax" class="node depth-1" title="ajax #41" style="left: 805px; top: 468px; width: 122px; height: 74px; background: rgb(127, 127, 127);"><span>ajax</span></a><a href="#ajax-active" class="node depth-2 hidden" data-module="ajax" title="active #1" style="left: 899px; top: 535px; width: 28px; height: 7px;"><span>active</span></a><a href="#ajax-ajax" class="node depth-2 hidden" data-module="ajax" title="ajax #22" style="left: 805px; top: 468px; width: 65px; height: 74px;"><span>ajax</span></a><a href="#ajax-get" class="node depth-2 hidden" data-module="ajax" title="get #17" style="left: 871px; top: 468px; width: 56px; height: 66px;"><span>get</span></a><a href="#ajax-parseJSON" class="node depth-2 hidden" data-module="ajax" title="parseJSON #1" style="left: 871px; top: 535px; width: 27px; height: 7px;"><span>parseJSON</span></a><a href="#offset" class="node depth-1" title="offset #30" style="left: 805px; top: 543px; width: 122px; height: 56px; background: rgb(188, 189, 34);"><span>offset</span></a><a href="#offset-offset" class="node depth-2 hidden" data-module="offset" title="offset #21" style="left: 805px; top: 543px; width: 85px; height: 56px;"><span>offset</span></a><a href="#offset-position" class="node depth-2 hidden" data-module="offset" title="position #5" style="left: 891px; top: 543px; width: 36px; height: 31px;"><span>position</span></a><a href="#offset-offsetParent" class="node depth-2 hidden" data-module="offset" title="offsetParent #1" style="left: 919px; top: 575px; width: 8px; height: 24px;"><span>offsetParent</span></a><a href="#offset-scrollTop" class="node depth-2 hidden" data-module="offset" title="scrollTop #3" style="left: 891px; top: 575px; width: 27px; height: 24px;"><span>scrollTop</span></a></div></div>

<form id="controls">
<p id="stats"><strong>2488</strong> occurrences of jQuery-related code.</p>
<p id="modules">
  <label class="selected major" style="background-color:rgba(31, 119, 180, 0.55)" title="Modules: traversing, traversing/findFilter"><input type="checkbox" checked name="module" value="traversing">traversing</label>
  <label class="selected major" style="background-color:rgba(255, 127, 14, 0.55)" title="Modules: attributes, attributes/attr, attributes/classes, attributes/prop, attributes/support, attributes/val"><input type="checkbox" checked name="module" value="attributes">attributes</label>
  <label class="selected major" style="background-color:rgba(44, 160, 44, 0.55)" title="Modules: event, event/ajax, event/alias, event/support"><input type="checkbox" checked name="module" value="event">event</label>
  <label class="selected major" style="background-color:rgba(214, 39, 40, 0.55)" title="Modules: manipulation, manipulation/_evalUrl, manipulation/support"><input type="checkbox" checked name="module" value="manipulation">manipulation</label>
  <label class="selected major" style="background-color:rgba(148, 103, 189, 0.55)" title="Modules: css, css/addGetHookIf, css/curCSS, css/defaultDisplay, css/hiddenVisibleSelectors, css/support, css/swap"><input type="checkbox" checked name="module" value="css">css</label>
  <label class="selected major" style="background-color:rgba(140, 86, 75, 0.55)" title="Modules: sizzle"><input type="checkbox" checked name="module" value="sizzle">sizzle</label>
  <label class="selected major" style="background-color:rgba(227, 119, 194, 0.55)" title="Modules: data, data/Data, data/accepts"><input type="checkbox" checked name="module" value="data">data</label>
  <label class="selected major" style="background-color:rgba(127, 127, 127, 0.55)" title="Modules: ajax, ajax/jsonp, ajax/load, ajax/parseJSON, ajax/parseXML, ajax/script, ajax/xhr"><input type="checkbox" checked name="module" value="ajax">ajax</label>
  <label class="selected major" style="background-color:rgba(188, 189, 34, 0.55)" title="Modules: offset"><input type="checkbox" checked name="module" value="offset">offset</label>

  <label title="Modules: dimensions"><input type="checkbox" name="module" value="dimensions">dimensions</label>
  <label title="Modules: effects, effects/Tween, effects/animatedSelector"><input type="checkbox" name="module" value="effects">effects</label>
  <label title="Modules: serialize"><input type="checkbox" name="module" value="serialize">serialize</label>
  <label title="Modules: wrap"><input type="checkbox" name="module" value="wrap">wrap</label>
  <label title="Modules: core, core/access, core/init, core/parseHTML, core/ready"><input type="checkbox" name="module" value="core">core</label>
  <label title="Modules: deprecated"><input type="checkbox" name="module" value="deprecated">deprecated</label>
  <label title="Modules: deferred"><input type="checkbox" name="module" value="deferred">deferred</label>
  <label title="Modules: exports/amd, exports/global"><input type="checkbox" name="module" value="exports">exports</label>
</p>
<strong>View data from folders:</strong>
<p id="folders">
  <label class="selected major" title="Contains drupal.js, form.js, vertical-tabs.js, tabledrag.js, etc."><input type="checkbox" name="folder" value="misc" id="misc" checked>core/misc</label>
  <label class="selected major" title="All the javascript from core modules"><input type="checkbox" name="folder" value="modules" id="modules" checked>core/modules</label>
  <label class="selected major" title="All the javascript from core themes"><input type="checkbox" name="folder" value="themes" id="themes" checked>core/themes</label>
  <label class="" title="Third party javascript (jQuery and jQueryUI excluded)"><input type="checkbox" name="folder" value="assets" id="vendor">core/vendor</label>
</p>
</form>

<div>
  <style>
    @media (max-width: 767px) {
      label {display:block;}
    }
    label {cursor:pointer;display:inline-block;cursor:pointer;margin:0;padding:0.5em 0.75em;overflow:hidden;text-align:center;}
    label input {position:absolute;overflow:hidden;width:1px;height:1px;}
    label.focus {text-decoration:underline;}
    
    #rss-friend {display:none;}
    #rss-fiend {display:block!important;margin:3em 0;}
    
    #bubblewrap {position:relative;height:600px;width:100%}
    #modules, #folders {display:flex;flex-wrap:wrap;}
    #modules label {flex: 1 1 auto;}
    #folders .selected {background-color:lightgrey;}
    .major {font-weight:bold;}
    .node, #modules label.selected {color:white;}
    .node {
      border: solid 1px white;
      overflow: hidden;
      position: absolute;
      display:flex;
      text-align:center;
    }
    .node span {flex: 1 1 auto;align-self: center;}
    .depth-1 {font-weight: bold;}
    .hidden {visibility: hidden;}
    .node {text-decoration: none;}
    .node:focus, .node:active {text-decoration: underline;}
  </style>
</div>

</div>


I've been working on a tool that inspect javascript files and show all 
jQuery methods and Sizzle selectors used in that file. I will be releasing it 
soon, once the npm namespace issue has been sorted out and I polished it a 
little bit more. Meanwhile, I ran it on Drupal code and got this:
<button type="button" id="viewtable">View raw data</button>.


<pre id="rawdata" hidden><code></code></pre>
<div>
  <script src="/assets/2015-04/d3.min.js"></script>
  <script src="/assets/2015-04/jquery-drupal-viz.js"></script>
  <script>dataQuery.display();</script>
</div>
